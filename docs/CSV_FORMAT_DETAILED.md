# CSVæ–‡ä»¶æ ¼å¼è¯¦ç»†è¯´æ˜

## æ¦‚è¿°

ç³»ç»Ÿæ”¯æŒä¸‰ç§æ•°æ®å¯¼å…¥æ–¹å¼ï¼š
1. **å®Œæ•´ç½‘ç»œå¯¼å…¥**ï¼šä½¿ç”¨ `nodes.csv` + `edges.csv` + `deliveries.csv`
2. **è·ç¦»çŸ©é˜µå¯¼å…¥**ï¼šä½¿ç”¨ `distance_matrix.csv` + `deliveries.csv`
3. **æ··åˆæ¨¡å¼**ï¼šå¯ä»¥å•ç‹¬å¯¼å…¥æŸäº›æ–‡ä»¶ï¼Œå…¶ä»–ä¿¡æ¯æ‰‹åŠ¨è¾“å…¥

---

## ğŸ“‹ æ–¹å¼ä¸€ï¼šå®Œæ•´ç½‘ç»œå¯¼å…¥

### 1. nodes.csv - èŠ‚ç‚¹ä¿¡æ¯

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | å­—ç¬¦ä¸² | âœ… | èŠ‚ç‚¹å”¯ä¸€æ ‡è¯†ç¬¦ | `warehouse`, `point_a` |
| latitude | æµ®ç‚¹æ•° | âœ… | çº¬åº¦åæ ‡ | `23.1291` |
| longitude | æµ®ç‚¹æ•° | âœ… | ç»åº¦åæ ‡ | `113.2644` |
| type | å­—ç¬¦ä¸² | âŒ | èŠ‚ç‚¹ç±»å‹ | `warehouse`/`delivery`/`transit` |

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```csv
id,latitude,longitude,type
warehouse,23.1291,113.2644,warehouse
point_a,23.1350,113.2700,delivery
point_b,23.1200,113.2500,delivery
transit_1,23.1250,113.2600,transit
```

**æ³¨æ„äº‹é¡¹ï¼š**
- `id` å¿…é¡»å”¯ä¸€ï¼Œå»ºè®®ä½¿ç”¨è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
- åæ ‡ç³»ç»Ÿï¼šä½¿ç”¨WGS84åæ ‡ç³»ï¼ˆå¸¸ç”¨GPSåæ ‡ï¼‰
- `type` ç”¨äºæ ‡è¯†èŠ‚ç‚¹è§’è‰²ï¼š
  - `warehouse`: ä»“åº“/é…é€ä¸­å¿ƒ
  - `delivery`: é…é€ç‚¹
  - `transit`: ä¸­è½¬ç«™ï¼ˆå¯é€‰ï¼‰

---

### 2. edges.csv - é“è·¯/è¾¹ä¿¡æ¯

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| from_node | å­—ç¬¦ä¸² | âœ… | èµ·å§‹èŠ‚ç‚¹ID | `warehouse` |
| to_node | å­—ç¬¦ä¸² | âœ… | ç›®æ ‡èŠ‚ç‚¹ID | `point_a` |
| distance | æµ®ç‚¹æ•° | âœ… | è·ç¦»ï¼ˆå…¬é‡Œï¼‰ | `5.2` |
| min_time | æµ®ç‚¹æ•° | âœ… | æœ€çŸ­è¡Œé©¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ | `8` |
| max_time | æµ®ç‚¹æ•° | âœ… | æœ€é•¿è¡Œé©¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ | `12` |

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```csv
from_node,to_node,distance,min_time,max_time
warehouse,point_a,5.2,8,12
warehouse,point_b,7.5,12,18
point_a,point_b,6.1,9,14
```

**æ³¨æ„äº‹é¡¹ï¼š**
- `from_node` å’Œ `to_node` å¿…é¡»åœ¨ `nodes.csv` ä¸­å­˜åœ¨
- æ”¯æŒ**éå¯¹ç§°è·¯ç½‘**ï¼šAâ†’B å’Œ Bâ†’A å¯ä»¥æœ‰ä¸åŒçš„è·ç¦»/æ—¶é—´
- æ”¯æŒ**éå®Œå…¨å›¾**ï¼šä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦ç›´æ¥ç›¸è¿
- `min_time` â‰¤ `max_time`ï¼šè€ƒè™‘äº¤é€šæ‹¥å µç­‰å› ç´ 
- å¦‚æœæ²¡æœ‰ `edges.csv`ï¼Œç³»ç»Ÿä¼šæ ¹æ®ç»çº¬åº¦è‡ªåŠ¨è®¡ç®—ç›´çº¿è·ç¦»

---

### 3. deliveries.csv - é…é€ç‚¹è¯¦ç»†ä¿¡æ¯

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | å­—ç¬¦ä¸² | âœ… | é…é€ç‚¹IDï¼ˆå¯¹åº”nodes.csvï¼‰ | `point_a` |
| demand | æµ®ç‚¹æ•° | âœ… | éœ€æ±‚é‡ï¼ˆé‡é‡/ä½“ç§¯/ä»¶æ•°ï¼‰ | `50` |
| service_time | æµ®ç‚¹æ•° | âœ… | æœåŠ¡æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰ | `15` |
| priority | æ•´æ•° | âŒ | ä¼˜å…ˆçº§ï¼ˆ1=é«˜ï¼Œ2=ä¸­ï¼Œ3=ä½ï¼‰ | `1` |
| time_window_start | æ—¥æœŸæ—¶é—´ | âŒ | æ—¶é—´çª—å¼€å§‹ | `2024-01-01 09:00:00` |
| time_window_end | æ—¥æœŸæ—¶é—´ | âŒ | æ—¶é—´çª—ç»“æŸ | `2024-01-01 12:00:00` |

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```csv
id,demand,service_time,priority,time_window_start,time_window_end
point_a,50,15,1,2024-01-01 09:00:00,2024-01-01 12:00:00
point_b,30,10,2,2024-01-01 10:00:00,2024-01-01 14:00:00
point_c,45,12,1,,,
```

**æ³¨æ„äº‹é¡¹ï¼š**
- `id` å¿…é¡»åœ¨ `nodes.csv` ä¸­å®šä¹‰
- `demand` å•ä½ä¸è½¦è¾†å®¹é‡å•ä½ä¿æŒä¸€è‡´
- `priority` é»˜è®¤ä¸º 1ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
- æ—¶é—´çª—å¯ä»¥ä¸ºç©ºï¼ˆç•™ç©ºè¡¨ç¤ºæ— æ—¶é—´é™åˆ¶ï¼‰
- æ—¶é—´æ ¼å¼ï¼š`YYYY-MM-DD HH:MM:SS`

---

## ğŸ“Š æ–¹å¼äºŒï¼šè·ç¦»çŸ©é˜µå¯¼å…¥

### distance_matrix.csv - è·ç¦»çŸ©é˜µ

**æ ¼å¼è¯´æ˜ï¼š**
- ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ä¸ºç©ºï¼Œå…¶ä½™ä¸ºèŠ‚ç‚¹ID
- ç¬¬ä¸€åˆ—ä¸ºèŠ‚ç‚¹ID
- çŸ©é˜µå†…å®¹ä¸ºèŠ‚ç‚¹é—´è·ç¦»ï¼ˆå…¬é‡Œï¼‰

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```csv
,warehouse,point_a,point_b,point_c
warehouse,0,5.2,7.5,9.8
point_a,5.2,0,6.1,4.1
point_b,7.5,6.1,0,9.3
point_c,9.8,4.1,9.3,0
```

**æ³¨æ„äº‹é¡¹ï¼š**
- å¯¹è§’çº¿é€šå¸¸ä¸º 0ï¼ˆèŠ‚ç‚¹åˆ°è‡ªèº«è·ç¦»ï¼‰
- æ”¯æŒ**å¯¹ç§°çŸ©é˜µ**ï¼šdistance(A,B) = distance(B,A)
- æ”¯æŒ**éå¯¹ç§°çŸ©é˜µ**ï¼šdistance(A,B) â‰  distance(B,A)
- ç©ºå€¼æˆ–ä¸å¯è¾¾è·¯å¾„ç”¨ `inf` æˆ–å¾ˆå¤§çš„æ•°å­—è¡¨ç¤º
- ä½¿ç”¨è·ç¦»çŸ©é˜µæ—¶ï¼Œä»éœ€æä¾› `deliveries.csv`

---

## ğŸ”„ æ•°æ®è¯»å–æµç¨‹

### å®Œæ•´ç½‘ç»œå¯¼å…¥æ¨¡å¼

```
1. è¯»å– nodes.csv
   â†“
2. è¯»å– edges.csvï¼ˆå¯é€‰ï¼‰
   â†“
3. æ„å»º LogisticsRouter å¯¹è±¡
   - å¦‚æœæœ‰ edges.csvï¼Œä½¿ç”¨å®šä¹‰çš„è¾¹
   - å¦‚æœæ²¡æœ‰ï¼Œæ ¹æ®ç»çº¬åº¦è®¡ç®—ç›´çº¿è·ç¦»
   â†“
4. è¯»å– deliveries.csv
   â†“
5. åˆ›å»º DeliveryPoint å¯¹è±¡åˆ—è¡¨
   - ä» nodes.csv è·å–åæ ‡
   - ä» deliveries.csv è·å–éœ€æ±‚ã€ä¼˜å…ˆçº§ç­‰
   â†“
6. è¿è¡Œè·¯å¾„ä¼˜åŒ–ç®—æ³•
```

### è·ç¦»çŸ©é˜µå¯¼å…¥æ¨¡å¼

```
1. è¯»å– distance_matrix.csv
   â†“
2. åˆ›å»ºç®€åŒ–çš„è·¯ç½‘ï¼ˆä¸éœ€è¦nodes.csvå’Œedges.csvï¼‰
   â†“
3. è¯»å– deliveries.csv
   â†“
4. è¿è¡Œè·¯å¾„ä¼˜åŒ–ç®—æ³•
```

---

## ğŸ“ æ–‡ä»¶ç»„ç»‡å»ºè®®

```
project/
â”œâ”€â”€ example_data/
â”‚   â”œâ”€â”€ nodes.csv          # èŠ‚ç‚¹ä¿¡æ¯
â”‚   â”œâ”€â”€ edges.csv          # è¾¹/é“è·¯ä¿¡æ¯
â”‚   â”œâ”€â”€ deliveries.csv     # é…é€ç‚¹è¯¦æƒ…
â”‚   â””â”€â”€ distance_matrix.csv # è·ç¦»çŸ©é˜µï¼ˆå¯é€‰ï¼‰
â””â”€â”€ scripts/
    â””â”€â”€ logistics-router-interactive.py
```

**ä½¿ç”¨æ—¶åªéœ€æŒ‡å®šç›®å½•ï¼š**
```python
config = FileImporter.import_from_csv('example_data/nodes.csv')
```

ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨åŒä¸€ç›®å½•ä¸‹æŸ¥æ‰¾ `edges.csv` å’Œ `deliveries.csv`ã€‚

---

## ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯1ï¼šåŸå¸‚é…é€ç½‘ç»œ
```csv
# nodes.csv - åŒ…å«ä»“åº“ã€å®¢æˆ·ç‚¹ã€ä¸­è½¬ç«™
warehouse_main,23.1291,113.2644,warehouse
customer_001,23.1350,113.2700,delivery
customer_002,23.1200,113.2500,delivery
hub_east,23.1400,113.2900,transit

# edges.csv - è€ƒè™‘å®é™…é“è·¯å’Œäº¤é€š
warehouse_main,customer_001,5.2,8,15  # æ—©é«˜å³°å¯èƒ½éœ€è¦15åˆ†é’Ÿ
customer_001,customer_002,6.1,9,12
warehouse_main,hub_east,12.5,18,30    # è·¨åŒºé…é€æ—¶é—´é•¿
```

### åœºæ™¯2ï¼šç”µå•†æœ€åä¸€å…¬é‡Œé…é€
```csv
# deliveries.csv - åŒ…å«æ—¶é—´çª—çº¦æŸ
order_001,2.5,5,1,2024-01-01 09:00:00,2024-01-01 10:00:00  # ç”Ÿé²œè®¢å•ï¼Œè¦æ±‚ä¸Šåˆé€è¾¾
order_002,1.2,3,2,2024-01-01 14:00:00,2024-01-01 18:00:00  # æ™®é€šè®¢å•ï¼Œä¸‹åˆæ—¶æ®µ
order_003,3.8,8,1,,,                                        # æ— æ—¶é—´é™åˆ¶
```

### åœºæ™¯3ï¼šç®€åŒ–çŸ©é˜µæ¨¡å¼ï¼ˆå°è§„æ¨¡é—®é¢˜ï¼‰
```csv
# distance_matrix.csv - åªæœ‰5ä¸ªç‚¹çš„ç®€å•ç½‘ç»œ
,depot,A,B,C,D
depot,0,3.2,4.5,6.1,8.9
A,3.2,0,2.1,3.8,5.6
B,4.5,2.1,0,4.2,3.3
C,6.1,3.8,4.2,0,2.7
D,8.9,5.6,3.3,2.7,0
```

---

## ğŸ› ï¸ å¯¼å‡ºæ¨¡æ¿åŠŸèƒ½

å¦‚æœä¸ç¡®å®šæ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„æ¨¡æ¿å¯¼å‡ºåŠŸèƒ½ï¼š

```python
FileImporter.export_template_csv('my_templates')
```

è¿™ä¼šåœ¨ `my_templates/` ç›®å½•ä¸‹ç”Ÿæˆæ‰€æœ‰æ¨¡æ¿æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åŸºäºæ¨¡æ¿ä¿®æ”¹ã€‚

---

## â“ å¸¸è§é—®é¢˜

**Q1: å¿…é¡»æä¾›æ‰€æœ‰3ä¸ªCSVæ–‡ä»¶å—ï¼Ÿ**
- ä¸ä¸€å®šã€‚`nodes.csv` å’Œ `deliveries.csv` æ˜¯å¿…éœ€çš„
- `edges.csv` å¯é€‰ï¼Œæ²¡æœ‰æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—ç›´çº¿è·ç¦»
- æˆ–è€…ä½¿ç”¨ `distance_matrix.csv` æ›¿ä»£ `nodes.csv` + `edges.csv`

**Q2: èŠ‚ç‚¹IDå¯ä»¥ä½¿ç”¨ä¸­æ–‡å—ï¼Ÿ**
- å¯ä»¥ï¼Œä½†å»ºè®®ä½¿ç”¨è‹±æ–‡æˆ–æ‹¼éŸ³ï¼Œé¿å…ç¼–ç é—®é¢˜

**Q3: å¦‚ä½•è¡¨ç¤ºå•å‘é“è·¯ï¼Ÿ**
- åªæ·»åŠ ä¸€æ¡è¾¹ã€‚ä¾‹å¦‚ï¼šåªæœ‰ `A,B,5` æ²¡æœ‰ `B,A,5`

**Q4: æ—¶é—´çª—æ ¼å¼é”™è¯¯æ€ä¹ˆåŠï¼Ÿ**
- ç¡®ä¿æ ¼å¼ä¸º `YYYY-MM-DD HH:MM:SS`
- å¯ä»¥ç•™ç©ºè¡¨ç¤ºæ— é™åˆ¶
- å¼€å§‹æ—¶é—´å¿…é¡»æ—©äºç»“æŸæ—¶é—´

**Q5: è·ç¦»å•ä½æ˜¯ä»€ä¹ˆï¼Ÿ**
- é»˜è®¤ä¸ºå…¬é‡Œï¼ˆkmï¼‰
- æ—¶é—´ä¸ºåˆ†é’Ÿï¼ˆminï¼‰
- éœ€æ±‚é‡å•ä½è‡ªå®šä¹‰ï¼ˆä¸è½¦è¾†å®¹é‡ä¸€è‡´å³å¯ï¼‰
