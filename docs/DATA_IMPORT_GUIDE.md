# æ•°æ®å¯¼å…¥å®Œæ•´æŒ‡å—

## ğŸ“‚ æ–‡ä»¶ç»„ç»‡ç»“æ„

ç³»ç»Ÿæ”¯æŒä¸¤ç§å¯¼å…¥æ–¹å¼ï¼š

### æ–¹å¼1ï¼šå®Œæ•´ç½‘ç»œå¯¼å…¥ï¼ˆé€‰é¡¹2ï¼‰

å°†ä»¥ä¸‹3ä¸ªCSVæ–‡ä»¶æ”¾åœ¨**åŒä¸€ç›®å½•**ä¸‹ï¼š

```
your_data_folder/
â”œâ”€â”€ nodes.csv          # èŠ‚ç‚¹ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ edges.csv          # é“è·¯è¿æ¥ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ deliveries.csv     # é…é€ç‚¹ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
```

**é‡è¦**ï¼šè¿è¡Œæ—¶åªéœ€è¾“å…¥**ç›®å½•è·¯å¾„**ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾è¿™3ä¸ªæ–‡ä»¶ã€‚

#### ç¤ºä¾‹è·¯å¾„è¾“å…¥ï¼š
```
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½•: example_data
æˆ–
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½•: /Users/username/logistics_data
æˆ–
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½•: ./my_network
```

---

### æ–¹å¼2ï¼šè·ç¦»çŸ©é˜µå¯¼å…¥ï¼ˆé€‰é¡¹3ï¼‰

ä»…éœ€1-2ä¸ªæ–‡ä»¶ï¼š

```
your_data_folder/
â”œâ”€â”€ distance_matrix.csv           # è·ç¦»çŸ©é˜µï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ delivery_config.csv           # é…é€ç‚¹é…ç½®ï¼ˆå¯é€‰ï¼‰
```

**é‡è¦**ï¼šè¿è¡Œæ—¶éœ€è¦è¾“å…¥**å®Œæ•´æ–‡ä»¶è·¯å¾„**ã€‚

#### ç¤ºä¾‹è·¯å¾„è¾“å…¥ï¼š
```
è¯·è¾“å…¥è·ç¦»çŸ©é˜µCSVæ–‡ä»¶è·¯å¾„: example_data/simple_distance_matrix.csv
è¯·è¾“å…¥é…é€ç‚¹é…ç½®æ–‡ä»¶è·¯å¾„: example_data/delivery_config_for_matrix.csv
```

---

## ğŸ” è¯¦ç»†å¯¼å…¥æµç¨‹

### é€‰é¡¹2ï¼šä»CSVæ–‡ä»¶å¯¼å…¥ï¼ˆå®Œæ•´ç½‘ç»œï¼‰

**æ­¥éª¤1ï¼šå‡†å¤‡3ä¸ªCSVæ–‡ä»¶**

#### nodes.csvï¼ˆèŠ‚ç‚¹ä¿¡æ¯ï¼‰
```csv
id,latitude,longitude,type
W001,39.9042,116.4074,warehouse
D001,39.9100,116.4200,delivery
D002,39.8950,116.3900,delivery
T001,39.9000,116.4100,transit
```
- `type`: warehouseï¼ˆä»“åº“ï¼‰ã€deliveryï¼ˆé…é€ç‚¹ï¼‰ã€transitï¼ˆä¸­è½¬ç«™ï¼‰

#### edges.csvï¼ˆé“è·¯ä¿¡æ¯ï¼‰
```csv
from_node,to_node,distance,min_time,max_time
W001,D001,5.2,10,20
W001,D002,7.8,15,30
D001,D002,3.5,7,14
```
- æ”¯æŒéå¯¹ç§°ç½‘ç»œï¼ˆAåˆ°Bå’ŒBåˆ°Aå¯ä»¥ä¸åŒï¼‰
- æ”¯æŒéå®Œå…¨å›¾ï¼ˆä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½ç›¸è¿ï¼‰

#### deliveries.csvï¼ˆé…é€ç‚¹è¯¦æƒ…ï¼‰
```csv
id,demand,service_time,priority,time_window_start,time_window_end
D001,50,15,high,2024-01-15 09:00:00,2024-01-15 12:00:00
D002,30,10,medium,2024-01-15 10:00:00,2024-01-15 14:00:00
```

**æ­¥éª¤2ï¼šè¿è¡Œç¨‹åº**
```bash
python scripts/logistics-router-interactive.py
```

**æ­¥éª¤3ï¼šé€‰æ‹©å¯¼å…¥æ–¹å¼**
```
è¯·é€‰æ‹©é…ç½®æ–¹å¼:
1. äº¤äº’å¼é…ç½®ï¼ˆæ‰‹åŠ¨è¾“å…¥ï¼‰
2. ä»CSVæ–‡ä»¶å¯¼å…¥
3. ä»è·ç¦»çŸ©é˜µå¯¼å…¥
4. å¯¼å‡ºCSVæ¨¡æ¿
5. é»˜è®¤æ¼”ç¤º
è¯·é€‰æ‹© (1-5): 2
```

**æ­¥éª¤4ï¼šè¾“å…¥ç›®å½•è·¯å¾„**
```
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½• (åŒ…å«nodes.csv, edges.csv, deliveries.csv): example_data
```

ç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶å¯¼å…¥ï¼š
```
âœ… æˆåŠŸå¯¼å…¥ 4 ä¸ªèŠ‚ç‚¹
âœ… æˆåŠŸå¯¼å…¥ 6 æ¡è¾¹
âœ… æˆåŠŸå¯¼å…¥ 2 ä¸ªé…é€ç‚¹
âœ… é…ç½®æ–‡ä»¶å¯¼å…¥æˆåŠŸ!
```

---

### é€‰é¡¹3ï¼šä»è·ç¦»çŸ©é˜µå¯¼å…¥ï¼ˆç®€åŒ–æ–¹å¼ï¼‰

**æ­¥éª¤1ï¼šå‡†å¤‡è·ç¦»çŸ©é˜µæ–‡ä»¶**

#### distance_matrix.csv
```csv
,W001,D001,D002,D003
W001,0,5.2,7.8,10.5
D001,5.2,0,3.5,6.2
D002,7.8,3.5,0,4.8
D003,10.5,6.2,4.8,0
```
- ç¬¬ä¸€è¡Œã€ç¬¬ä¸€åˆ—ï¼šèŠ‚ç‚¹ID
- çŸ©é˜µå€¼ï¼šèŠ‚ç‚¹é—´è·ç¦»ï¼ˆå¯ä»¥éå¯¹ç§°ï¼‰

#### delivery_config_for_matrix.csvï¼ˆå¯é€‰ï¼‰
```csv
node_id,demand,priority,service_time,time_window_start,time_window_end
D001,50,high,15,09:00,12:00
D002,30,medium,10,10:00,14:00
D003,40,low,12,08:00,16:00
```

**æ­¥éª¤2ï¼šè¿è¡Œå¹¶å¯¼å…¥**
```bash
python scripts/logistics-router-interactive.py
```

é€‰æ‹©é€‰é¡¹3ï¼Œè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼š
```
è¯·è¾“å…¥è·ç¦»çŸ©é˜µCSVæ–‡ä»¶è·¯å¾„: example_data/simple_distance_matrix.csv
âœ… å¯¼å…¥è·ç¦»çŸ©é˜µ: 4 x 4

æ˜¯å¦æœ‰é…é€ç‚¹é…ç½®æ–‡ä»¶? (y/n, é»˜è®¤n): y
è¯·è¾“å…¥é…é€ç‚¹é…ç½®æ–‡ä»¶è·¯å¾„: example_data/delivery_config_for_matrix.csv
âœ… å¯¼å…¥é…é€ç‚¹é…ç½®: 3 ä¸ªé…é€ç‚¹
```

---

## ğŸ“ è·¯å¾„å®šä¹‰è§„åˆ™

### ç»å¯¹è·¯å¾„ vs ç›¸å¯¹è·¯å¾„

#### ç›¸å¯¹è·¯å¾„ï¼ˆæ¨èï¼‰
ä»è„šæœ¬è¿è¡Œä½ç½®å¼€å§‹è®¡ç®—ï¼š
```python
example_data                    # å½“å‰ç›®å½•ä¸‹çš„example_dataæ–‡ä»¶å¤¹
./example_data                  # åŒä¸Šï¼ˆæ˜¾å¼è¡¨ç¤ºå½“å‰ç›®å½•ï¼‰
../data/logistics              # ä¸Šçº§ç›®å½•çš„data/logisticsæ–‡ä»¶å¤¹
```

#### ç»å¯¹è·¯å¾„
å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼š
```python
# Windows
C:/Users/YourName/Documents/logistics_data

# Mac/Linux
/Users/YourName/Documents/logistics_data
/home/username/logistics_data
```

---

## ğŸ¯ å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šä½¿ç”¨æä¾›çš„ç¤ºä¾‹æ•°æ®

å‡è®¾ä½ å·²ç»åˆ›å»ºäº†example_dataç›®å½•ï¼š

```bash
# é¡¹ç›®ç»“æ„
logistics-router/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ logistics-router-interactive.py
â””â”€â”€ example_data/
    â”œâ”€â”€ nodes.csv
    â”œâ”€â”€ edges.csv
    â””â”€â”€ deliveries.csv
```

è¿è¡Œå‘½ä»¤ï¼š
```bash
cd logistics-router
python scripts/logistics-router-interactive.py
```

è¾“å…¥ï¼š
```
è¯·é€‰æ‹©é…ç½®æ–¹å¼: 2
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½•: example_data
```

### ç¤ºä¾‹2ï¼šä½¿ç”¨è‡ªå·±çš„æ•°æ®

```bash
# æ•°æ®åœ¨å…¶ä»–ä½ç½®
/Users/john/my_logistics_project/
â””â”€â”€ data/
    â”œâ”€â”€ city_network/
    â”‚   â”œâ”€â”€ nodes.csv
    â”‚   â”œâ”€â”€ edges.csv
    â”‚   â””â”€â”€ deliveries.csv
```

è¿è¡Œå¹¶è¾“å…¥ï¼š
```
è¯·é€‰æ‹©é…ç½®æ–¹å¼: 2
è¯·è¾“å…¥CSVæ–‡ä»¶ç›®å½•: /Users/john/my_logistics_project/data/city_network
```

---

## âš ï¸ å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šç›®å½•ä¸å­˜åœ¨
```
âŒ ç›®å½•ä¸å­˜åœ¨!
```
**è§£å†³**ï¼šæ£€æŸ¥è·¯å¾„æ‹¼å†™ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–ç¡®è®¤ç›¸å¯¹è·¯å¾„æ­£ç¡®

### é”™è¯¯2ï¼šæ–‡ä»¶ä¸å­˜åœ¨
```
âŒ å¯¼å…¥å¤±è´¥: [Errno 2] No such file or directory: 'nodes.csv'
```
**è§£å†³**ï¼šç¡®ä¿nodes.csvã€edges.csvã€deliveries.csvéƒ½åœ¨æŒ‡å®šç›®å½•ä¸­

### é”™è¯¯3ï¼šCSVæ ¼å¼é”™è¯¯
```
âŒ å¯¼å…¥å¤±è´¥: could not convert string to float: 'abc'
```
**è§£å†³**ï¼šæ£€æŸ¥CSVæ–‡ä»¶æ ¼å¼ï¼Œç¡®ä¿æ•°å€¼å­—æ®µå¡«å†™æ­£ç¡®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æµç¨‹

1. **å¯¼å‡ºæ¨¡æ¿**ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
   ```
   é€‰æ‹©é€‰é¡¹ 4: å¯¼å‡ºCSVæ¨¡æ¿
   è¾“å…¥è·¯å¾„: ./my_data
   ```

2. **ç¼–è¾‘CSVæ–‡ä»¶**
   - ç”¨Excelæˆ–æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€my_dataç›®å½•ä¸‹çš„CSVæ–‡ä»¶
   - å¡«å…¥ä½ çš„å®é™…æ•°æ®

3. **å¯¼å…¥æ•°æ®**
   ```
   é€‰æ‹©é€‰é¡¹ 2: ä»CSVæ–‡ä»¶å¯¼å…¥
   è¾“å…¥è·¯å¾„: ./my_data
   ```

4. **è¿è¡Œä¼˜åŒ–ç®—æ³•**
   - ç³»ç»Ÿè‡ªåŠ¨åŸºäºå¯¼å…¥çš„æ•°æ®è¿›è¡Œè·¯å¾„è§„åˆ’è®¡ç®—
   - æŸ¥çœ‹ä¼˜åŒ–ç»“æœ

---

## ğŸ“Š æ•°æ®æµç¨‹å›¾

```
[CSVæ–‡ä»¶] 
    â†“
[FileImporter.import_from_csv()] 
    â†“
[è§£æå¹¶éªŒè¯æ•°æ®]
    â†“
[æ„å»ºLogisticsRouterå¯¹è±¡]
    â†“
[åˆ›å»ºDeliveryPointåˆ—è¡¨]
    â†“
[è¿è¡Œä¼˜åŒ–ç®—æ³•]
    â†“
[è¾“å‡ºç»“æœ]
```

---

## ğŸ’¡ æç¤º

1. **ä½¿ç”¨æ¨¡æ¿**ï¼šå…ˆç”¨é€‰é¡¹4å¯¼å‡ºæ¨¡æ¿ï¼Œå†å¡«å†™æ•°æ®
2. **æ£€æŸ¥ç¼–ç **ï¼šCSVæ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 
3. **æµ‹è¯•æ•°æ®**ï¼šä½¿ç”¨example_dataæµ‹è¯•ç¨‹åºæ˜¯å¦æ­£å¸¸è¿è¡Œ
4. **å¢é‡å¯¼å…¥**ï¼šå¯ä»¥å…ˆç”¨å°æ•°æ®é›†æµ‹è¯•ï¼Œå†å¯¼å…¥å®Œæ•´æ•°æ®
